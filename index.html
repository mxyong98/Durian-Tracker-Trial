<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Durian Tree Tracker</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.10/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body style="margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;">
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const Camera = ({ size=24 }) => React.createElement('svg',{width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},React.createElement('path',{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),React.createElement('circle',{cx:"12",cy:"13",r:"4"}));
    const Edit2 = ({ size=24 }) => React.createElement('svg',{width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},React.createElement('path',{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}));
    const Filter = ({ size=24 }) => React.createElement('svg',{width:size,height:size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},React.createElement('polygon',{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}));

    window.storage = {
      get: async (key) => { try { const d = localStorage.getItem(key); return d ? {key,value:d} : null; } catch(e) { return null; } },
      set: async (key, value) => { try { localStorage.setItem(key,value); return {key,value}; } catch(e) { return null; } },
      list: async (prefix) => { try { const keys = Object.keys(localStorage).filter(k=>k.startsWith(prefix||'')); return {keys}; } catch(e) { return {keys:[]}; } }
    };

    function App() {
      const [allTrees, setAllTrees] = useState([]);
      const [selectedTreeId, setSelectedTreeId] = useState('');
      const [typeFilter, setTypeFilter] = useState('all');
      const [statusFilter, setStatusFilter] = useState('all');
      const [isLoading, setIsLoading] = useState(true);
      const [showSicknessForm, setShowSicknessForm] = useState(false);
      const [showTreatmentForm, setShowTreatmentForm] = useState(false);
      const [showFloweringForm, setShowFloweringForm] = useState(false);
      const [showFruitingForm, setShowFruitingForm] = useState(false);
      const [editingSicknessId, setEditingSicknessId] = useState(null);
      const [editingTreatmentId, setEditingTreatmentId] = useState(null);
      const [editingFloweringId, setEditingFloweringId] = useState(null);
      const [editingFruitingId, setEditingFruitingId] = useState(null);
      const [sicknessPhotos, setSicknessPhotos] = useState([]);
      const [dateIdentified, setDateIdentified] = useState('');
      const [sicknessNotes, setSicknessNotes] = useState('');
      const [employeeName, setEmployeeName] = useState('');
      const [treatmentPhotos, setTreatmentPhotos] = useState([]);
      const [treatmentRecommended, setTreatmentRecommended] = useState('');
      const [treatmentCompleted, setTreatmentCompleted] = useState('');
      const [treatmentDate, setTreatmentDate] = useState('');
      const [replantingRequired, setReplantingRequired] = useState('no');
      const [hasRecovered, setHasRecovered] = useState('no');
      const [treatmentEmployee, setTreatmentEmployee] = useState('');
      const [floweringPhotos, setFloweringPhotos] = useState([]);
      const [floweringDate, setFloweringDate] = useState('');
      const [floweringStatus, setFloweringStatus] = useState('no');
      const [floweringNotes, setFloweringNotes] = useState('');
      const [floweringEmployee, setFloweringEmployee] = useState('');
      const [fruitingPhotos, setFruitingPhotos] = useState([]);
      const [fruitingDate, setFruitingDate] = useState('');
      const [fruitingStatus, setFruitingStatus] = useState('no');
      const [fruitingNotes, setFruitingNotes] = useState('');
      const [fruitingEmployee, setFruitingEmployee] = useState('');

      useEffect(() => { initializeTrees(); }, []);

      const initializeTrees = async () => {
        const trees = [];
        for (let i = 1; i <= 10; i++) {
          trees.push({ id:`A${10000+i}`, treeNumber:`A${10000+i}`, treeType:'', generalPhotos:[], sicknessLogs:[], treatmentLogs:[], floweringLogs:[], fruitingLogs:[], status:'healthy' });
        }
        for (const tree of trees) {
          try { const s = await window.storage.get(`dtree:${tree.id}`); if (s) Object.assign(tree, JSON.parse(s.value)); } catch(e) {}
        }
        trees.forEach(t => { t.status = calcStatus(t); });
        setAllTrees(trees);
        setIsLoading(false);
      };

      const calcStatus = (tree) => {
        if (tree.sicknessLogs.length > 0 && tree.treatmentLogs.length === 0) return 'sick';
        if (tree.treatmentLogs.length > 0) {
          const sorted = [...tree.treatmentLogs].sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));
          return sorted[0].hasRecovered === 'yes' ? 'healthy' : 'sick';
        }
        return 'healthy';
      };

      const saveTree = async (tree) => {
        const updated = { ...tree, status: calcStatus(tree) };
        await window.storage.set(`dtree:${tree.id}`, JSON.stringify(updated));
        setAllTrees(prev => prev.map(t => t.id === tree.id ? updated : t));
      };

      const uploadPhotos = (e, setter) => {
        Array.from(e.target.files).forEach(file => {
          const r = new FileReader();
          r.onloadend = () => setter(prev => [...prev, r.result]);
          r.readAsDataURL(file);
        });
      };

      const uploadGeneral = async (e) => {
        const tree = allTrees.find(t => t.id === selectedTreeId);
        if (!tree) return;
        const photos = [];
        for (const file of Array.from(e.target.files)) {
          await new Promise(res => { const r = new FileReader(); r.onloadend = () => { photos.push(r.result); res(); }; r.readAsDataURL(file); });
        }
        await saveTree({ ...tree, generalPhotos: [...tree.generalPhotos, ...photos] });
      };

      const updateType = async (type) => {
        const tree = allTrees.find(t => t.id === selectedTreeId);
        if (tree) await saveTree({ ...tree, treeType: type });
      };

      const submitSickness = async () => {
        if (!dateIdentified || !sicknessNotes || !employeeName) return alert('Please fill all fields');
        const tree = allTrees.find(t => t.id === selectedTreeId);
        const newLog = { id:`s-${Date.now()}`, dateIdentified, photos:sicknessPhotos, notes:sicknessNotes, employeeName, timestamp:new Date().toISOString() };
        const logs = editingSicknessId ? tree.sicknessLogs.map(l => l.id === editingSicknessId ? {...l,...newLog,id:l.id} : l) : [...tree.sicknessLogs, newLog];
        await saveTree({ ...tree, sicknessLogs: logs });
        setDateIdentified(''); setSicknessNotes(''); setEmployeeName(''); setSicknessPhotos([]); setShowSicknessForm(false); setEditingSicknessId(null);
      };

      const submitTreatment = async () => {
        if (!treatmentRecommended || !treatmentEmployee) return alert('Please fill all fields');
        const tree = allTrees.find(t => t.id === selectedTreeId);
        const newLog = { id:`t-${Date.now()}`, treatmentRecommended, treatmentCompleted, treatmentDate, replantingRequired, hasRecovered, photos:treatmentPhotos, employeeName:treatmentEmployee, timestamp:new Date().toISOString() };
        const logs = editingTreatmentId ? tree.treatmentLogs.map(l => l.id === editingTreatmentId ? {...l,...newLog,id:l.id} : l) : [...tree.treatmentLogs, newLog];
        await saveTree({ ...tree, treatmentLogs: logs });
        setTreatmentRecommended(''); setTreatmentCompleted(''); setTreatmentDate(''); setReplantingRequired('no'); setHasRecovered('no'); setTreatmentEmployee(''); setTreatmentPhotos([]); setShowTreatmentForm(false); setEditingTreatmentId(null);
      };

      const submitFlowering = async () => {
        if (!floweringDate || !floweringEmployee) return alert('Please fill all fields');
        const tree = allTrees.find(t => t.id === selectedTreeId);
        const newLog = { id:`f-${Date.now()}`, date:floweringDate, status:floweringStatus, photos:floweringPhotos, notes:floweringNotes, employeeName:floweringEmployee, timestamp:new Date().toISOString() };
        const logs = editingFloweringId ? tree.floweringLogs.map(l => l.id === editingFloweringId ? {...l,...newLog,id:l.id} : l) : [...tree.floweringLogs, newLog];
        await saveTree({ ...tree, floweringLogs: logs });
        setFloweringDate(''); setFloweringStatus('no'); setFloweringNotes(''); setFloweringEmployee(''); setFloweringPhotos([]); setShowFloweringForm(false); setEditingFloweringId(null);
      };

      const submitFruiting = async () => {
        if (!fruitingDate || !fruitingEmployee) return alert('Please fill all fields');
        const tree = allTrees.find(t => t.id === selectedTreeId);
        const newLog = { id:`fr-${Date.now()}`, date:fruitingDate, status:fruitingStatus, photos:fruitingPhotos, notes:fruitingNotes, employeeName:fruitingEmployee, timestamp:new Date().toISOString() };
        const logs = editingFruitingId ? tree.fruitingLogs.map(l => l.id === editingFruitingId ? {...l,...newLog,id:l.id} : l) : [...tree.fruitingLogs, newLog];
        await saveTree({ ...tree, fruitingLogs: logs });
        setFruitingDate(''); setFruitingStatus('no'); setFruitingNotes(''); setFruitingEmployee(''); setFruitingPhotos([]); setShowFruitingForm(false); setEditingFruitingId(null);
      };

      const sel = allTrees.find(t => t.id === selectedTreeId);

      const filtered = allTrees.filter(tree => {
        const mt = typeFilter === 'all' || tree.treeType === typeFilter;
        const ms = (() => {
          if (statusFilter === 'all') return true;
          if (statusFilter === 'healthy') return tree.status === 'healthy';
          if (statusFilter === 'sick') return tree.status === 'sick';
          if (statusFilter === 'flowering') {
            if (!tree.floweringLogs.length) return false;
            const s = [...tree.floweringLogs].sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp))[0];
            return s.status === 'some' || s.status === 'heavy';
          }
          if (statusFilter === 'fruiting') {
            if (!tree.fruitingLogs.length) return false;
            const s = [...tree.fruitingLogs].sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp))[0];
            return s.status === 'some' || s.status === 'many';
          }
          return true;
        })();
        return mt && ms;
      });

      if (isLoading) return React.createElement('div',{className:'min-h-screen bg-green-50 flex items-center justify-center'},React.createElement('p',{className:'text-green-700'},'Loading...'));

      const btn = (label, active, color, onClick) => React.createElement('button',{onClick,className:`py-2 px-3 rounded text-sm font-medium ${active ? `bg-${color}-600 text-white` : 'bg-gray-100 text-gray-700'}`},label);
      const inp = (props) => React.createElement('input',{className:'w-full px-3 py-2 rounded border border-gray-300',...props});
      const ta = (props) => React.createElement('textarea',{className:'w-full px-3 py-2 rounded border border-gray-300',...props});
      const radio = (name, value, checked, setter, label) => React.createElement('label',{className:'flex items-center gap-1 cursor-pointer'},React.createElement('input',{type:'radio',name,value,checked,onChange:()=>setter(value)}),label);

      return React.createElement('div',{className:'min-h-screen bg-green-50 pb-20'},
        React.createElement('div',{className:'bg-green-700 text-white p-4 shadow-lg'},
          React.createElement('h1',{className:'text-xl font-bold'},'ðŸŒ³ Durian Tree Tracker'),
          React.createElement('p',{className:'text-sm text-green-100'},'Plantation Monitor')
        ),
        React.createElement('div',{className:'p-4 space-y-4'},
          React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
            React.createElement('div',{className:'flex items-center gap-2 mb-3'},React.createElement(Filter,{size:18}),React.createElement('h3',{className:'font-semibold'},'Filters')),
            React.createElement('div',{className:'space-y-3'},
              React.createElement('div',null,
                React.createElement('p',{className:'text-xs font-medium text-gray-600 mb-1'},'Tree Type'),
                React.createElement('div',{className:'grid grid-cols-4 gap-2'},
                  ['all','MK','BT','Others'].map(t=>btn(t==='all'?'All':t, typeFilter===t, 'blue', ()=>setTypeFilter(t)))
                )
              ),
              React.createElement('div',null,
                React.createElement('p',{className:'text-xs font-medium text-gray-600 mb-1'},'Status'),
                React.createElement('div',{className:'grid grid-cols-3 gap-2'},
                  React.createElement('button',{onClick:()=>setStatusFilter('all'),className:`py-2 rounded text-xs ${statusFilter==='all'?'bg-blue-600 text-white':'bg-gray-100'}`},'All'),
                  React.createElement('button',{onClick:()=>setStatusFilter('healthy'),className:`py-2 rounded text-xs ${statusFilter==='healthy'?'bg-green-600 text-white':'bg-gray-100'}`},'Healthy'),
                  React.createElement('button',{onClick:()=>setStatusFilter('sick'),className:`py-2 rounded text-xs ${statusFilter==='sick'?'bg-red-600 text-white':'bg-gray-100'}`},'Sick'),
                  React.createElement('button',{onClick:()=>setStatusFilter('flowering'),className:`py-2 rounded text-xs ${statusFilter==='flowering'?'bg-purple-600 text-white':'bg-gray-100'}`},'Flowering'),
                  React.createElement('button',{onClick:()=>setStatusFilter('fruiting'),className:`py-2 rounded text-xs ${statusFilter==='fruiting'?'bg-orange-600 text-white':'bg-gray-100'}`},'Fruiting')
                )
              )
            )
          ),
          React.createElement('div',null,
            React.createElement('label',{className:'block text-sm font-medium mb-2'},'Select Tree'),
            React.createElement('select',{value:selectedTreeId,onChange:e=>setSelectedTreeId(e.target.value),className:'w-full px-4 py-3 rounded-lg border border-gray-300'},
              React.createElement('option',{value:''},'-- Select a tree --'),
              filtered.map(t=>React.createElement('option',{key:t.id,value:t.id},`${t.treeNumber}${t.treeType?` (${t.treeType})`:''} ${t.status==='sick'?'ðŸ¤’':'âœ…'}`))
            )
          ),
          sel && React.createElement('div',{className:'space-y-4'},
            React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
              React.createElement('div',{className:'flex justify-between items-center mb-3'},
                React.createElement('h2',{className:'text-2xl font-bold text-green-800'},sel.treeNumber),
                React.createElement('span',{className:`px-3 py-1 rounded-full text-sm ${sel.status==='sick'?'bg-red-100 text-red-800':'bg-green-100 text-green-800'}`},sel.status==='sick'?'ðŸ¤’ Sick':'âœ… Healthy')
              ),
              React.createElement('p',{className:'text-sm font-medium mb-2'},'Tree Type'),
              React.createElement('div',{className:'flex gap-2'},
                ['MK','BT','Others'].map(t=>React.createElement('button',{key:t,onClick:()=>updateType(t),className:`flex-1 py-2 rounded text-sm ${sel.treeType===t?'bg-blue-600 text-white':'bg-gray-100 text-gray-700'}`},t))
              )
            ),
            React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
              React.createElement('h3',{className:'font-semibold mb-3'},'General Photos'),
              React.createElement('div',{className:'border-2 border-dashed rounded-lg p-4 text-center mb-3'},
                React.createElement('input',{type:'file',accept:'image/*',multiple:true,capture:'environment',onChange:uploadGeneral,className:'hidden',id:'gp'}),
                React.createElement('label',{htmlFor:'gp',className:'cursor-pointer'},
                  React.createElement(Camera,{size:32,className:'mx-auto mb-2 text-gray-400'}),
                  React.createElement('p',{className:'text-sm text-gray-500'},'Tap to add photos')
                )
              ),
              sel.generalPhotos.length > 0 && React.createElement('div',{className:'grid grid-cols-3 gap-2'},
                sel.generalPhotos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-24 object-cover rounded'}))
              )
            ),
            React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
              React.createElement('div',{className:'flex justify-between mb-3'},
                React.createElement('h3',{className:'font-semibold'},'Sickness Logs'),
                React.createElement('button',{onClick:()=>setShowSicknessForm(!showSicknessForm),className:'px-3 py-1 bg-red-600 text-white rounded text-sm'},showSicknessForm?'Cancel':'+ Log')
              ),
              showSicknessForm && React.createElement('div',{className:'mb-4 p-4 bg-red-50 rounded space-y-3'},
                inp({type:'date',value:dateIdentified,onChange:e=>setDateIdentified(e.target.value),placeholder:'Date identified'}),
                React.createElement('input',{type:'file',accept:'image/*',multiple:true,onChange:e=>uploadPhotos(e,setSicknessPhotos),className:'w-full text-sm'}),
                sicknessPhotos.length > 0 && React.createElement('div',{className:'grid grid-cols-3 gap-2'},sicknessPhotos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-20 object-cover rounded'}))),
                ta({value:sicknessNotes,onChange:e=>setSicknessNotes(e.target.value),rows:3,placeholder:'Symptoms / notes'}),
                inp({type:'text',value:employeeName,onChange:e=>setEmployeeName(e.target.value),placeholder:'Your name'}),
                React.createElement('div',{className:'flex gap-2'},
                  React.createElement('button',{onClick:()=>{setShowSicknessForm(false);setEditingSicknessId(null);},className:'flex-1 py-2 bg-gray-200 rounded'},'Cancel'),
                  React.createElement('button',{onClick:submitSickness,className:'flex-1 py-2 bg-red-600 text-white rounded'},'Save')
                )
              ),
              sel.sicknessLogs.length > 0 ? sel.sicknessLogs.map(log=>React.createElement('div',{key:log.id,className:'border border-red-200 rounded p-3 bg-red-50 mb-2'},
                React.createElement('div',{className:'flex justify-between mb-1'},
                  React.createElement('span',{className:'text-sm font-medium text-red-800'},new Date(log.dateIdentified).toLocaleDateString()),
                  React.createElement('button',{onClick:()=>{setEditingSicknessId(log.id);setDateIdentified(log.dateIdentified);setSicknessPhotos(log.photos||[]);setSicknessNotes(log.notes);setEmployeeName(log.employeeName);setShowSicknessForm(true);},className:'text-blue-600'},React.createElement(Edit2,{size:16}))
                ),
                log.photos&&log.photos.length>0&&React.createElement('div',{className:'grid grid-cols-3 gap-1 mb-2'},log.photos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-16 object-cover rounded'}))),
                React.createElement('p',{className:'text-sm'},log.notes),
                React.createElement('p',{className:'text-xs text-gray-500'},`By: ${log.employeeName}`)
              )) : React.createElement('p',{className:'text-sm text-gray-400 text-center py-3'},'No sickness logs')
            ),
            React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
              React.createElement('div',{className:'flex justify-between mb-3'},
                React.createElement('h3',{className:'font-semibold'},'Treatment Logs'),
                React.createElement('button',{onClick:()=>setShowTreatmentForm(!showTreatmentForm),className:'px-3 py-1 bg-green-600 text-white rounded text-sm'},showTreatmentForm?'Cancel':'+ Log')
              ),
              showTreatmentForm && React.createElement('div',{className:'mb-4 p-4 bg-green-50 rounded space-y-3'},
                ta({value:treatmentRecommended,onChange:e=>setTreatmentRecommended(e.target.value),rows:2,placeholder:'Recommended treatment'}),
                ta({value:treatmentCompleted,onChange:e=>setTreatmentCompleted(e.target.value),rows:2,placeholder:'Progress / completed'}),
                inp({type:'date',value:treatmentDate,onChange:e=>setTreatmentDate(e.target.value)}),
                React.createElement('input',{type:'file',accept:'image/*',multiple:true,onChange:e=>uploadPhotos(e,setTreatmentPhotos),className:'w-full text-sm'}),
                treatmentPhotos.length > 0 && React.createElement('div',{className:'grid grid-cols-3 gap-2'},treatmentPhotos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-20 object-cover rounded'}))),
                React.createElement('div',null,React.createElement('p',{className:'text-sm mb-1'},'Replanting required?'),React.createElement('div',{className:'flex gap-4'},radio('rep','no',replantingRequired==='no',setReplantingRequired,'No'),radio('rep','yes',replantingRequired==='yes',setReplantingRequired,'Yes'))),
                React.createElement('div',null,React.createElement('p',{className:'text-sm mb-1'},'Recovered?'),React.createElement('div',{className:'flex gap-4'},radio('rec','no',hasRecovered==='no',setHasRecovered,'No'),radio('rec','yes',hasRecovered==='yes',setHasRecovered,'Yes'))),
                inp({type:'text',value:treatmentEmployee,onChange:e=>setTreatmentEmployee(e.target.value),placeholder:'Your name'}),
                React.createElement('div',{className:'flex gap-2'},
                  React.createElement('button',{onClick:()=>{setShowTreatmentForm(false);setEditingTreatmentId(null);},className:'flex-1 py-2 bg-gray-200 rounded'},'Cancel'),
                  React.createElement('button',{onClick:submitTreatment,className:'flex-1 py-2 bg-green-600 text-white rounded'},'Save')
                )
              ),
              sel.treatmentLogs.length > 0 ? sel.treatmentLogs.map(log=>React.createElement('div',{key:log.id,className:'border border-green-200 rounded p-3 bg-green-50 mb-2'},
                React.createElement('div',{className:'flex justify-between mb-1'},
                  React.createElement('span',{className:'text-sm font-medium'},log.treatmentDate?new Date(log.treatmentDate).toLocaleDateString():'No date'),
                  React.createElement('button',{onClick:()=>{setEditingTreatmentId(log.id);setTreatmentRecommended(log.treatmentRecommended);setTreatmentCompleted(log.treatmentCompleted||'');setTreatmentDate(log.treatmentDate||'');setReplantingRequired(log.replantingRequired);setHasRecovered(log.hasRecovered);setTreatmentPhotos(log.photos||[]);setTreatmentEmployee(log.employeeName);setShowTreatmentForm(true);},className:'text-blue-600'},React.createElement(Edit2,{size:16}))
                ),
                log.photos&&log.photos.length>0&&React.createElement('div',{className:'grid grid-cols-3 gap-1 mb-2'},log.photos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-16 object-cover rounded'}))),
                React.createElement('div',{className:'space-y-1 text-sm'},
                  React.createElement('p',null,React.createElement('strong',null,'Recommended: '),log.treatmentRecommended),
                  log.treatmentCompleted&&React.createElement('p',null,React.createElement('strong',null,'Progress: '),log.treatmentCompleted),
                  React.createElement('p',null,React.createElement('strong',null,'Replanting: '),log.replantingRequired==='yes'?'ðŸŸ  Yes':'âœ… No'),
                  React.createElement('p',null,React.createElement('strong',null,'Recovered: '),log.hasRecovered==='yes'?'âœ… Yes':'ðŸ¤’ No'),
                  React.createElement('p',{className:'text-xs text-gray-500'},`By: ${log.employeeName}`)
                )
              )) : React.createElement('p',{className:'text-sm text-gray-400 text-center py-3'},'No treatment logs')
            ),
            React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
              React.createElement('div',{className:'flex justify-between mb-3'},
                React.createElement('h3',{className:'font-semibold'},'Flowering Logs'),
                React.createElement('button',{onClick:()=>setShowFloweringForm(!showFloweringForm),className:'px-3 py-1 bg-purple-600 text-white rounded text-sm'},showFloweringForm?'Cancel':'+ Log')
              ),
              showFloweringForm && React.createElement('div',{className:'mb-4 p-4 bg-purple-50 rounded space-y-3'},
                inp({type:'date',value:floweringDate,onChange:e=>setFloweringDate(e.target.value)}),
React.createElement('div',null,React.createElement('p',{className:'text-sm mb-1'},'Status'),React.createElement('div',{className:'flex gap-4'},radio('fls','no',floweringStatus==='no',setFloweringStatus,'No flowering'),radio('fls','some',floweringStatus==='some',setFloweringStatus,'Some flowering'),radio('fls','heavy',floweringStatus==='heavy',setFloweringStatus,'Heavy flowering'))),
                React.createElement('input',{type:'file',accept:'image/*',multiple:true,onChange:e=>uploadPhotos(e,setFloweringPhotos),className:'w-full text-sm'}),
                floweringPhotos.length > 0 && React.createElement('div',{className:'grid grid-cols-3 gap-2'},floweringPhotos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-20 object-cover rounded'}))),
                ta({value:floweringNotes,onChange:e=>setFloweringNotes(e.target.value),rows:2,placeholder:'Notes'}),
                inp({type:'text',value:floweringEmployee,onChange:e=>setFloweringEmployee(e.target.value),placeholder:'Your name'}),
                React.createElement('div',{className:'flex gap-2'},
                  React.createElement('button',{onClick:()=>{setShowFloweringForm(false);setEditingFloweringId(null);},className:'flex-1 py-2 bg-gray-200 rounded'},'Cancel'),
                  React.createElement('button',{onClick:submitFlowering,className:'flex-1 py-2 bg-purple-600 text-white rounded'},'Save')
                )
              ),
              sel.floweringLogs.length > 0 ? sel.floweringLogs.map(log=>React.createElement('div',{key:log.id,className:'border border-purple-200 rounded p-3 bg-purple-50 mb-2'},
                React.createElement('div',{className:'flex justify-between mb-1'},
                  React.createElement('span',{className:'text-sm font-medium'},new Date(log.date).toLocaleDateString()),
                  React.createElement('button',{onClick:()=>{setEditingFloweringId(log.id);setFloweringDate(log.date);setFloweringStatus(log.status);setFloweringPhotos(log.photos||[]);setFloweringNotes(log.notes||'');setFloweringEmployee(log.employeeName);setShowFloweringForm(true);},className:'text-blue-600'},React.createElement(Edit2,{size:16}))
                ),
                log.photos&&log.photos.length>0&&React.createElement('div',{className:'grid grid-cols-3 gap-1 mb-2'},log.photos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-16 object-cover rounded'}))),
                React.createElement('p',{className:'text-sm'},React.createElement('strong',null,'Status: '),log.status==='no'?'No flowering':log.status==='some'?'Some flowering':'Heavy flowering'),
                log.notes&&React.createElement('p',{className:'text-sm'},log.notes),
                React.createElement('p',{className:'text-xs text-gray-500'},`By: ${log.employeeName}`)
              )) : React.createElement('p',{className:'text-sm text-gray-400 text-center py-3'},'No flowering logs')
            ),
            React.createElement('div',{className:'bg-white rounded-lg shadow p-4'},
              React.createElement('div',{className:'flex justify-between mb-3'},
                React.createElement('h3',{className:'font-semibold'},'Fruiting Logs'),
                React.createElement('button',{onClick:()=>setShowFruitingForm(!showFruitingForm),className:'px-3 py-1 bg-orange-600 text-white rounded text-sm'},showFruitingForm?'Cancel':'+ Log')
              ),
              showFruitingForm && React.createElement('div',{className:'mb-4 p-4 bg-orange-50 rounded space-y-3'},
                inp({type:'date',value:fruitingDate,onChange:e=>setFruitingDate(e.target.value)}),
                React.createElement('div',null,React.createElement('p',{className:'text-sm mb-1'},'Status'),React.createElement('div',{className:'flex gap-4'},radio('frs','no',fruitingStatus==='no',setFruitingStatus,'No fruits'),radio('frs','some',fruitingStatus==='some',setFruitingStatus,'Some fruits'),radio('frs','many',fruitingStatus==='many',setFruitingStatus,'Many fruits'))),
                React.createElement('input',{type:'file',accept:'image/*',multiple:true,onChange:e=>uploadPhotos(e,setFruitingPhotos),className:'w-full text-sm'}),
                fruitingPhotos.length > 0 && React.createElement('div',{className:'grid grid-cols-3 gap-2'},fruitingPhotos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-20 object-cover rounded'}))),
                ta({value:fruitingNotes,onChange:e=>setFruitingNotes(e.target.value),rows:2,placeholder:'Notes'}),
                inp({type:'text',value:fruitingEmployee,onChange:e=>setFruitingEmployee(e.target.value),placeholder:'Your name'}),
                React.createElement('div',{className:'flex gap-2'},
                  React.createElement('button',{onClick:()=>{setShowFruitingForm(false);setEditingFruitingId(null);},className:'flex-1 py-2 bg-gray-200 rounded'},'Cancel'),
                  React.createElement('button',{onClick:submitFruiting,className:'flex-1 py-2 bg-orange-600 text-white rounded'},'Save')
                )
              ),
              sel.fruitingLogs.length > 0 ? sel.fruitingLogs.map(log=>React.createElement('div',{key:log.id,className:'border border-orange-200 rounded p-3 bg-orange-50 mb-2'},
                React.createElement('div',{className:'flex justify-between mb-1'},
                  React.createElement('span',{className:'text-sm font-medium'},new Date(log.date).toLocaleDateString()),
                  React.createElement('button',{onClick:()=>{setEditingFruitingId(log.id);setFruitingDate(log.date);setFruitingStatus(log.status);setFruitingPhotos(log.photos||[]);setFruitingNotes(log.notes||'');setFruitingEmployee(log.employeeName);setShowFruitingForm(true);},className:'text-blue-600'},React.createElement(Edit2,{size:16}))
                ),
                log.photos&&log.photos.length>0&&React.createElement('div',{className:'grid grid-cols-3 gap-1 mb-2'},log.photos.map((p,i)=>React.createElement('img',{key:i,src:p,alt:'',className:'w-full h-16 object-cover rounded'}))),
                React.createElement('p',{className:'text-sm'},React.createElement('strong',null,'Status: '),log.status==='no'?'No fruits':log.status==='some'?'Some fruits':'Many fruits'),
                log.notes&&React.createElement('p',{className:'text-sm'},log.notes),
                React.createElement('p',{className:'text-xs text-gray-500'},`By: ${log.employeeName}`)
              )) : React.createElement('p',{className:'text-sm text-gray-400 text-center py-3'},'No fruiting logs')
            )
          )
        )
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>